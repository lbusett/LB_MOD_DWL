<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MODIStsp: A Tool for Automatic Preprocessing of MODIS Time Series - v1.3.6 • MODIStsp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="MODIStsp: A Tool for Automatic Preprocessing of MODIS Time Series - v1.3.6">
<meta property="og:description" content="">
<meta property="og:image" content="http://ropensci.github.io/MODIStsp/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-84499524-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84499524-2');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MODIStsp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.7.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/interactive_execution.html">Interactive Execution - the MODIStsp GUI</a>
    </li>
    <li>
      <a href="../articles/noninteractive_execution.html">Non-Interactive Execution from within R</a>
    </li>
    <li>
      <a href="../articles/standalone_execution.html">Standalone Execution and Scheduled Processing</a>
    </li>
    <li>
      <a href="../articles/output.html">Outputs Format and Naming Conventions</a>
    </li>
    <li>
      <a href="../articles/analyze.html">Accessing and Analyzing Processed Data from R</a>
    </li>
    <li>
      <a href="../articles/Products_list.html">Supported MODIS Products</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    faq
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/ropensci/MODIStsp/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>MODIStsp: A Tool for Automatic Preprocessing of MODIS Time Series - v1.3.6</h1>
                        <h4 class="author">Lorenzo Busetto (<a href="mailto:lbusett@gmail.com">busetto.l@irea.cnr.it</a>), Luigi Ranghetti (<a href="mailto:ranghetti.l@irea.cnr.it">ranghetti.l@irea.cnr.it</a>)</h4>
            
            <h4 class="date">2018-11-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/MODIStsp/blob/master/vignettes/MODIStsp.Rmd"><code>vignettes/MODIStsp.Rmd</code></a></small>
      <div class="hidden name"><code>MODIStsp.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>MODIStsp is a novel “R” package allowing to automatize the creation of time series of rasters derived from MODIS Land Products data. It allows to perform several preprocessing steps on MODIS data available within a given time period.</p>
<p>Development of MODIStsp started from modifications of the ModisDownload “R” script by Thomas Hengl <span class="citation">(2010)</span>, and successive adaptations by Babak Naimi <span class="citation">(2014)</span>. The basic functionalities for download and preprocessing of MODIS datasets provided by these scripts were gradually incremented with the aim of:</p>
<ul>
<li>developing a stand-alone application allowing to perform several preprocessing steps (e.g., download, mosaicing, reprojection and resize) on all available MODIS land products by exploiting a powerful and user-friendly GUI front-end;</li>
<li>allowing the creation of time series of both MODIS original layers and additional Quality Indicators (e.g., data acquisition quality, cloud/snow presence, algorithm used for data production, etc. ) extracted from the aggregated bit-field QA layers;</li>
<li>allowing the automatic calculation and creation of time series of several additional Spectral Indexes starting form MODIS surface reflectance products.</li>
</ul>
<p>All processing parameters can be easily set with a user-friendly GUI, although non-interactive execution exploiting a previously created Options File is possible. Stand-alone execution outside an “R” environment is also possible, allowing to use scheduled execution of MODIStsp to automatically update time series related to a MODIS product and extent whenever a new image is available.</p>
<p>Required MODIS HDF files are automatically downloaded from NASA servers and resized, reprojected, resampled and processed according to user’s choices. For each desired output layer, outputs are saved as single-band rasters corresponding to each acquisition date available for the selected MODIS product within the specified time period. “R” <em>RasterStack</em> objects with temporal information as well as Virtual raster files (GDAL vrt and ENVI META files) facilitating access to the entire time series can be also created.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p><code>MODIStsp</code> requires <a href="https://cran.r-project.org">R</a> v &gt;= 3.2.1 and <a href="http://www.gdal.org">GDAL</a> (Geospatial Data Abstraction Library) v &gt;= 1.11.1 <strong>with support for HDF4 raster format</strong> to be installed in your system. Brief instructions for installing R and GDAL can be found <a href="#installing-r-and-gdal">HERE</a>.</p>
<div id="on-windows" class="section level2">
<h2 class="hasAnchor">
<a href="#on-windows" class="anchor"></a>On Windows</h2>
<p>You can install the stable version of <code>MODIStsp</code>, from CRAN:</p>
<p><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("MODIStsp")</a></code></p>
<p>, or the development version (containing the latest improvements and bug fixes):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(devtools)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ropensci/MODIStsp"</span>)</a></code></pre></div>
<p>Note that <strong>if the <code>GTK+</code> library is not already installed on your system, installation may fail</strong>. In that case, please install and load the <code>gWidgetsRGtk2</code> library beforehand:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"gWidgetsRGtk2"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gWidgetsRGtk2)</a></code></pre></div>
<p>Upon loading <code>gWidgetsRGtk2</code> , an error window will probably appear. This signals that library “GTK+” is not yet installed on your system or is not on your PATH. To install it press “OK”. A new window dialog window will appear, asking if you want to install “GTK+”. Select “Install GTK” and then “OK” . Windows will download and install the GTK+ library. When it finishes, the RSession should be restarted and you should be ready to go !<sup name="a1"></sup></p>
<p>In case RStudio does not automatically restart or continuously asks to install GTK+ again, kill it form “Task Manager” (or restart the R session from RStudio “Session” menu), reload RStudio and the try to reload <code>gWidgetsRGtk2</code>. If it loads correctly, you should be ready to go.</p>
<p>If it still fails, try downloading the GTK+ bundle from:</p>
<p><a href="http://ftp.gnome.org/pub/gnome/binaries/win64/gtk+/2.22/gtk+-bundle_2.22.1-20101229_win64.zip" class="uri">http://ftp.gnome.org/pub/gnome/binaries/win64/gtk+/2.22/gtk+-bundle_2.22.1-20101229_win64.zip</a> (OR <a href="http://ftp.gnome.org/pub/gnome/binaries/win32/gtk+/2.22/gtk+-bundle_2.22.1-20101227_win32.zip" class="uri">http://ftp.gnome.org/pub/gnome/binaries/win32/gtk+/2.22/gtk+-bundle_2.22.1-20101227_win32.zip</a> if on Win32)</p>
<p>, unzip the archive on a folder of your choice (e.g., <code>C:\\Program Files\\GTK+</code>), then add the path to its “bin” subfolder (e.g., <code>C:\\Program Files\\GTK+\\bin\\</code> to your system PATH environment variable.</p>
<p>Restart your system and try loading again <code>gWidgetsRGtk2</code>: if it loads ok, you should be ready to install <code>MODIStsp</code></p>
</div>
<div id="on-linux-systems" class="section level2">
<h2 class="hasAnchor">
<a href="#on-linux-systems" class="anchor"></a>On Linux systems</h2>
<p>To install <code>MODIStsp</code> on Linux, you have to first install the following required dependencies:</p>
<ul>
<li>
<code>Cairo</code> &gt;= 1.0.0, <code>ATK</code> &gt;= 1.10.0, <code>Pango</code> &gt;= 1.10.0, <code>GTK+</code> &gt;= 2.8.0, <code>GLib</code> &gt;= 2.8.0 (required by package <code>RGtk2</code>)</li>
<li>
<code>Curl</code> (required by package <code>curl</code>)</li>
<li>
<code>GDAL</code> &gt;= 1.6.3, <code>PROJ.4</code> &gt;= 4.4.9 (required by package <code>rgdal</code>)</li>
</ul>
<p>On <em>Debian and Ubuntu-based</em> systems, to install those packages open a terminal and type:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="fu">sudo</span> apt-get install r-cran-cairodevice r-cran-rgtk2 libcairo2-dev libatk1.0-dev libpango1.0-dev </a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="ex">libgtk2.0-dev</span> libglib2.0-dev libcurl4-openssl-dev libgdal-dev libproj-dev</a></code></pre></div>
<p>On <em>rpm-base systems</em>, to install packages open a terminal and type:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="fu">sudo</span> yum install libcairo2-devel libatk1.0-devel libpango1.0-devel gtk2 gtk2-devel </a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="ex">glib2-devel</span> libcurl-devel gdal-devel proj proj-devel proj-epsg proj-nad</a></code></pre></div>
<p>Then, you can install the stable version of MODIStsp from CRAN:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"MODIStsp"</span>)</a></code></pre></div>
<p>, or the development version (containing the latest improvements and bug fixes) from github;</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(devtools)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ropensci/MODIStsp"</span>)</a></code></pre></div>
</div>
<div id="on-mac-os" class="section level2">
<h2 class="hasAnchor">
<a href="#on-mac-os" class="anchor"></a>On Mac OS</h2>
<p><strong>NOTE</strong>: The following installation notes should be valid for MODIStsp installation on R 3.4.0 and above with Mac OSX Sierra. They were mainly taken (i.e., blatantly copied…) from: <a href="https://zhiyzuo.github.io/installation-rattle/" class="uri">https://zhiyzuo.github.io/installation-rattle/</a>. Thanks to Zhiya Zuo for providing this!</p>
<p>To properly install <code>MODIStsp</code> you will need to first install package <code>RGTk2</code>. This is a somehow difficult operation. The following instructions should help:</p>
<p><strong>1. Check your Mac OS X version and update if necessary: </strong></p>
<p>Enter the following command in terminal to check your macOS version. Expected output is as below the dashed line —.</p>
<pre><code>~$ sw_vers  
------------------------  
ProductName:    Mac OS X  
ProductVersion: 10.12.6  
BuildVersion:   16G29  </code></pre>
<p>If your system is above 10.11, continue. Otherwise, upgrade it to Sierra.</p>
<p>Install homebrew if you do not have it already installed. homebrew is a very convenient package manager for macOS. To do so, open a terminal, copy the following command in it and hit Enter:</p>
<pre><code>~$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code></pre>
<p>Follow the instructions to get brew ready. When inserting your password, nothing will show up for security reasons. Just hit Enter when you are finished.</p>
<p>When brew is finished, copy the following command in terminal and hit Enter:</p>
<pre><code>~$ touch ~/.bash_profile
~$ echo "export PATH=/usr/local/bin:$PATH
export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:/usr/local/lib/pkgconfig/gtk+-2.0.pc:/opt/X11/lib/pkgconfig" &gt;&gt; ~/.bash_profile
~$ source ~/.bash_profile</code></pre>
<p><strong>2. Install the <code>cairo</code> library with x11 support</strong>. Enter the following into your terminal:</p>
<pre><code>~$ brew uninstall --force cairo --ignore-dependencies
~$ brew cask install xquartz
~$ brew install --with-x11 cairo</code></pre>
<p><strong>3. Install the <code>gtk+</code> library</strong>:</p>
<p>To do so, you first have to change the way homebrew wants to install gtk+. In an editor, write:</p>
<pre><code>~$ brew edit gtk+</code></pre>
<p>A text editor will open. Look in the file, and find a section that begins with “def install”. Substitute the current <code>args</code> section with the following text:</p>
<pre><code>def install
 args = [
         "--disable-dependency-tracking",
         "--disable-silent-rules",
         "--prefix=#{prefix}",
         "--disable-glibtest",
         "--enable-introspection=yes",
         # "--disable-visibility",
         # "--with-gdktarget=quartz",
         "--with-gdktarget=x11",
         "--enable-x11-backend"
        ]</code></pre>
<p>Save the modified file using <code>ctrl+x ctrl+c</code>, followed by <code>y</code> to quit emacs. Now install the library using:</p>
<pre><code>~$ brew install --build-from-source --verbose gtk+</code></pre>
<p><strong>4. Update your path</strong> so that <code>gtk+</code> is recognized, using:</p>
<pre><code>~$ export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:/usr/local/lib/pkgconfig/gtk+-2.0.pc:/opt/X11/lib/pkgconfig</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>
<strong>Install <code>RGtk2</code> from source</strong>:</li>
</ol>
<ul>
<li><p><strong>Download the newest source file for RGtk2</strong> from <a href="https://CRAN.R-project.org/package=gWidgetsRGtk2" class="uri">https://CRAN.R-project.org/package=gWidgetsRGtk2</a>.</p></li>
<li><p>Assuming that the path to this file is ~/Downloads. Run the following in terminal (change the path if you did not download in ~/Downloads):</p></li>
</ul>
<pre><code>~$ cd ~/Downloads
~/Downloads$ R CMD INSTALL RGtk2_2.20.33.tar.gz</code></pre>
<p>(Note that the name of the tar.gz file may vary depending on when you downloaded the file).</p>
<ol start="6" style="list-style-type: decimal">
<li>
<strong>Open R and run</strong>:</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(RGtk2)</a></code></pre></div>
<p>hopefully, <code>RGtk2</code> will load without errors! If so, you should be ready to go, and you can:</p>
<ol start="7" style="list-style-type: decimal">
<li>
<strong>Install MODIStsp</strong> from CRAN:</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"MODIStsp"</span>)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw"><a href="../reference/MODIStsp.html">MODIStsp</a></span>()</a></code></pre></div>
<p>or the development version from GitHub:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(devtools) </a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ropensci/MODIStsp"</span>, <span class="dt">ref =</span> <span class="st">"master"</span>)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw"><a href="../reference/MODIStsp.html">MODIStsp</a></span>()</a></code></pre></div>
<p>Good luck!</p>
</div>
</div>
<div id="running-the-tool-in-interactive-mode-the-modistsp-gui" class="section level1">
<h1 class="hasAnchor">
<a href="#running-the-tool-in-interactive-mode-the-modistsp-gui" class="anchor"></a>Running the tool in Interactive Mode: the MODIStsp GUI</h1>
<p>The easiest way to use <code>MODIStsp</code> is to use its powerful GUI (Graphical User Interface) for selection of processing options, and then run the processing.</p>
<p>To open the GUI, load the package and launch the MODIStsp function, with no parameters:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(MODIStsp)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw"><a href="../reference/MODIStsp.html">MODIStsp</a></span>()</a></code></pre></div>
<p>This <strong>opens a GUI</strong> from which processing options can be specified and eventually saved (or loaded) <font size="2"> (Note 1: PCs with a small screen can fail to visualize the whole GUI; in this case, the user can add scroll bars with <code><a href="../reference/MODIStsp.html">MODIStsp(scrollWindow=TRUE)</a></code>); Note 2: At the first execution of <code>MODIStsp</code>, a Welcome screen will appear, signaling that <code>MODIStsp</code> is searching for a valid GDAL installation. Press “OK” and wait for GDAL to be found. If nothing happens for a long time (e.g., several minutes), <code>MODIStsp</code> (and in particular the gdalUtils package on which it relies) is not finding a valid GDAL installation in the more common locations. To solve the problem: 1. Ensure that GDAL is properly installed in your system 2. (On Windows) If it is installed, verify that GDAL is in your system PATH. and that the <em>GDAL_DATA</em> environment variable is correctly set (You can find simple instructions <a href="http://gisforthought.com/setting-up-your-gdal-and-ogr-environmental-variables/">HERE</a>) 3. If nothing works, signal it in the <a href="https://github.com/ropensci/MODIStsp/issues">issues</a> GitHub page of <code>MODIStsp</code> and we’ll try to help! </font></p>
<p>The GUI allows selecting all processing options required for the creation of the desired MODIS time series. The main available processing options are described in detail in the following.</p>
<p><img src="MODIStsp_files/figure-html/GUIfig-1.png" width="700" style="display: block; margin: auto;"></p>
<div id="selecting-processing-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#selecting-processing-parameters" class="anchor"></a><strong>Selecting Processing Parameters</strong>
</h2>
<div id="modis-product-platform-and-layers" class="section level3">
<h3 class="hasAnchor">
<a href="#modis-product-platform-and-layers" class="anchor"></a><strong><em>MODIS Product, Platform and Layers:</em></strong>
</h3>
<p>The top-most menus allow to specify details of the desired output time series:</p>
<ol style="list-style-type: decimal">
<li>
<strong>“Category”</strong> and <strong>“Product”</strong>: Selects the MODIS product of interest;</li>
<li>
<strong>MODIS platform(s)</strong>: Selects if only TERRA, only AQUA or Both MODIS platforms should be considered for download and creation of the time series;</li>
<li>
<strong>version</strong>: Selects whether processing version 5 or 6 (when available) of MODIS products has to be processed</li>
</ol>
<p>After selecting the product and version, clicking the <strong>“Change Selection”</strong> button opens the <em><em>Select Processing Layers</em></em> GUI panel, from which the user <strong>must</strong> select which MODIS original layers and/or derived Quality Indexes (QI) and Spectral Indexes (SI) layers should be processed:</p>
<p><img src="MODIStsp_files/figure-html/proc_layers-1.png" width="700" style="display: block; margin: auto;"></p>
<ul>
<li>The left-hand frame allows to select which <em>original MODIS layers</em> should be processed.</li>
<li>The central frame allows to select which <em>Quality Indicators should be extracted</em> from the original MODIS Quality Assurance layers.</li>
<li>For MODIS products containing surface reflectance data, the right-hand frame allows to select which additional <em>Spectral Indexes should be computed</em>. The following commonly used Spectral Indexes are available for computation by default:</li>
</ul>
<center>
<strong>Table II: List of default Spectral Indexes available in MODIStsp</strong>
</center>
<table class="table">
<thead><tr class="header">
<th>Index Acronym</th>
<th>Index name and reference</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>NDVI</td>
<td>Normalized Difference Vegetation Index <span class="citation">(Rouse et al. 1973)</span>
</td>
</tr>
<tr class="even">
<td>EVI</td>
<td>Enhanced Vegetation Index <span class="citation">(Huete et al. 2002)</span>
</td>
</tr>
<tr class="odd">
<td>SR</td>
<td>Simple Ratio <span class="citation">(Tucker 1979)</span>
</td>
</tr>
<tr class="even">
<td>NDFI</td>
<td>Normalized Difference Flood Index <span class="citation">(Boschetti et al. 2014)</span>
</td>
</tr>
<tr class="odd">
<td>NDII7 (NDWI)</td>
<td>Normalized Difference Infrared Index - Band 7 <span class="citation">(Hunt and Rock 1989)</span>
</td>
</tr>
<tr class="even">
<td>SAVI</td>
<td>Soil Adjusted Vegetation Index <span class="citation">(Huete 1988)</span>
</td>
</tr>
<tr class="odd">
<td>NDSI</td>
<td>Normalized Difference Snow Index <span class="citation">(Hall et al. 2002)</span>
</td>
</tr>
<tr class="even">
<td>NDII6</td>
<td>Normalized Difference Infrared Index - band 6 <span class="citation">(Hunt and Rock 1989)</span>
</td>
</tr>
<tr class="odd">
<td>GNDVI</td>
<td>Green Normalized Difference Vegetation Index <span class="citation">(Gitelson and Merzlyak 1998)</span>
</td>
</tr>
<tr class="even">
<td>RGRI</td>
<td>Red Green Ratio Index <span class="citation">(Gamon and Surfus 1999)</span>
</td>
</tr>
<tr class="odd">
<td>GRVI</td>
<td>Green-Red ratio Vegetation Index <span class="citation">(Tucker 1979)</span>
</td>
</tr>
</tbody>
</table>
<p>You can however <strong>specify other SIs to be computed without modifying MODIStsp source code</strong> by clicking on the <em><strong>“Add Custom Index”</strong></em> button, which allow to provide info related to the new desired SI using a simple GUI interface. <img src="MODIStsp_files/figure-html/indexfig-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Provided information (e.g., correct band-names, computable formula, etc…) is automatically checked upon clicking “Set New Index”. On success, the new index is added in the list of available ones for all products allowing its computation. Clicking “Done !” returns to the main.</p>
<p><strong>NOTE</strong> All custom defined indexes can be removed by using the <code><a href="../reference/MODIStsp_resetindexes.html">MODIStsp_resetindexes()</a></code> function</p>
</div>
<div id="download-method" class="section level3">
<h3 class="hasAnchor">
<a href="#download-method" class="anchor"></a><strong><em>Download Method:</em></strong>
</h3>
<p>Select the method to be used for download. Available choices are:</p>
<ol style="list-style-type: decimal">
<li><p><strong>http</strong>: download through ftp from NASA lpdaac http archive (<a href="http://e4ftl01.cr.usgs.gov" class="uri">http://e4ftl01.cr.usgs.gov</a>). This requires providing a user name and password, which can be obtained by registering an account at the address <a href="https://urs.earthdata.nasa.gov/profile">https://urs.earthdata.nasa.gov/profile</a>;</p></li>
<li><p><strong>offline</strong>: this option allows to process/reprocess HDF files already available on the user’s PC without downloading from NASA – useful if the user already has an archive of HDF images, or to reprocess data already downloaded via MODIStsp to create time series for an additional layer (<em>It is fundamental that the HDFs are those directly downloaded from NASA servers</em> ! (See <a href="faq.html#working-with-already-downloaded-hdf-files">here</a> for additional details).</p></li>
</ol>
<p>Checking the <strong>use_aria2c</strong> option allows to accelerate the download from NASA archives. This requires however that that the “aria2c” software is installed in your system. To download and install it, see: <a href="aria2.github.io/">https://aria2.github.io/</a></p>
<p><font size="2"> <em>NOTE: The best performances are usually achieved using <em>http</em>, though that may vary depending on network infrastructure.</em> </font></p>
</div>
<div id="processing-period" class="section level3">
<h3 class="hasAnchor">
<a href="#processing-period" class="anchor"></a><strong><em>Processing Period:</em></strong>
</h3>
<p>Specify the starting and ending dates to be considered for the creation of the time in the series corresponding fields. Dates <strong>must</strong> be provided in the <em>yyyy–mm–dd</em> format (e.g., 2015-01-31)</p>
<p>The <strong>Period</strong> drop-down menu allows to choose between two options:</p>
<ol style="list-style-type: decimal">
<li><p><strong>full</strong>: all available images between the starting and ending dates are downloaded and processed;</p></li>
<li><p><strong>seasonal</strong>: data is downloaded only for one part of the year, but for multiple years. For example, if the starting date is 2005-03-01 and the ending is 2010-06-01, only the images of March, April and May for the years between 2005 and 2010 will be downloaded. This allows to easily process data concerning a particular season of interest.</p></li>
</ol>
</div>
<div id="spatial-extent" class="section level3">
<h3 class="hasAnchor">
<a href="#spatial-extent" class="anchor"></a><strong><em>Spatial Extent:</em></strong>
</h3>
<p>Allows to define the area of interest for the processing. Two main options are possible:</p>
<ol style="list-style-type: decimal">
<li>
<p><strong>Select MODIS Tiles</strong>: specify which MODIS tiles need to be processed either by:</p>
<ol style="list-style-type: lower-alpha">
<li>Using the “Start” and “End” horizontal and vertical sliders in the <em>Required MODIS Tiles</em> frame.<br>
</li>
<li>pressing the <strong>“Select on Map”</strong> button. A map will open in a browser window, allowing interactive selection of the required tiles</li>
</ol>
</li>
</ol>
<p>During processing, data from the different tiles is mosaiced, and a single file covering the total area is produced for each acquisition date</p>
<ol start="2" style="list-style-type: decimal">
<li>
<p><strong>Define Custom Area</strong>: specify a custom spatial extent for the desired outputs either by:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Manually inserting the coordinates of the Upper Left and Lower Right corners of the area of interest in the <strong>Bounding Box</strong> frame. <em>Coordinates of the corners must be provided in the coordinate system of the selected output projection</em>;</p></li>
<li><p>pressing the <strong>“Load Extent from a Spatial File” and selecting a raster or vector spatial file</strong>. In this case, the bounding box of the selected file is retrieved, converted in the selected output projection, and shown in the “Bounding Box” frame. Required input MODIS tiles are also automatically retrieved from the output extent, and the tiles selection sliders modified accordingly.</p></li>
<li><p>pressing the <strong>“Select on Map”</strong> button. A map will open in a browser window, allowing interactive selection of the spatial extent using the tools on the left.</p></li>
</ol>
</li>
</ol>
<p><strong>Note: </strong> pressing the “show current extent” will open a browser window highlighting the currently selected spatial extent.</p>
</div>
<div id="reprojection-and-resize" class="section level3">
<h3 class="hasAnchor">
<a href="#reprojection-and-resize" class="anchor"></a><em>Reprojection and Resize</em>
</h3>
<p>Specify the options to be used for reprojecting and resizing the MODIS images.</p>
<ul>
<li><p><strong>“Output Projection”</strong>: select either the Native MODIS projection (Default) or specify a user-defined one. To specify a user selected projection, select “User Defined” and then insert a valid “Proj4” string in the pop-up window. Validity of the Proj4 string is automatically checked, and error messages issued if the check fails;</p></li>
<li><p><strong>“Output Resolution”</strong>, <strong>“Pixel Size”</strong> and <strong>“Reprojection Method”</strong>: specify whether output images should inherit their spatial resolution from the original MODIS files, or be resampled to a user-defined resolution. In the latter case, output spatial resolution must be specified in the measure units of the selected output projection. Resampling method can be chosen among “Nearest Neighbour” and “Mode” (Useful for down-sampling purposes). Other resampling methods (e.g., bilinear, cubic) are not currently supported since i) they cannot be used for resampling of categorical variables such as the QA and QI layers, and ii) using them on continuous variable (e.g., reflectance, VI values) without performing an a-priori data cleaning would risk to contaminate the values of high-quality observations with those of low-quality ones.</p></li>
</ul>
</div>
<div id="output-options" class="section level3">
<h3 class="hasAnchor">
<a href="#output-options" class="anchor"></a><em>Output Options</em>
</h3>
<p>Several processing options can be set using check-boxes:</p>
<ul>
<li><p><strong>Output Files Format</strong>: Two of the most commonly formats used in remote sensing applications are available at the moment: ENVI binary and GeoTiff. If GeoTiff is selected, the type of file compression can be also specified among “None”, “PACKBITS”, “LZW” and “DEFLATE”.</p></li>
<li><p><strong>Save Time Series as</strong>: Specify if virtual multitemporal files should be created. These virtual files allow access to the entire time series of images as a single file without the need of creating large multitemporal raster images. Available virtual files formats are “R” rasterStacks, ENVI meta-files and GDAL “vrt” files. In particular, “R” rasterStacks may be useful in order to easily access the preprocessed MODIS data within “R” scripts (see also <a href="http://ropensci.github.io/MODIStsp/articles/output.html" class="uri">http://ropensci.github.io/MODIStsp/articles/output.html</a>).</p></li>
<li><p><strong>Modify No Data</strong>: Specify if NoData values of MODIS layers should be kept at their original values, or changed to those specified within the “MODIStsp_Products_Opts” XML file. By selecting “Yes” in the “Change Original NoData values” check-box, NoData of outputs are set to the largest integer value possible for the data type of the processed layer (e.g., for 8-bit unsigned integer layers, NoData is set always to 255, for 16-bit signed integer layers to 32767, and for 16-bit unsigned integer layers to 65535). Information about the new NoData values is stored both in the output rasters, and in the XML files associated with them. <strong>NOTE:</strong> Some MODIS layers have multiple NoData (a.k.a. <em>fill</em>) values. if <em>Modify No Data</em> is set to “Yes”, <code>MODIStsp</code> will convert all <em>fill</em> values to a common output NoData value!</p></li>
<li><p><strong>Apply Scale/Offset</strong>: Specify if scale and offset values of the different MODIS layers should be applied. If selected, outputs are appropriately rescaled on the fly, and saved in the true “measure units” of the selected parameter (e.g., spectral indexes are saved as floating point values; Land Surface Temperature is saved in degrees Kelvin, etc.).</p></li>
</ul>
</div>
<div id="main-modistsp-output-folder" class="section level3">
<h3 class="hasAnchor">
<a href="#main-modistsp-output-folder" class="anchor"></a><strong>Main MODIStsp Output Folder</strong>
</h3>
<p>Select the main folder where the pre-processed time series data will be stored. All <code>MODIStsp</code> outputs <strong>will be placed in specific sub-folders of this main folder</strong> (see <a href="http://ropensci.github.io/MODIStsp/articles/output.html" class="uri">http://ropensci.github.io/MODIStsp/articles/output.html</a> for details on <code>MODIStsp</code> naming conventions)-.</p>
<p>The <strong>“Reprocess Existing Data”</strong> check-box allows to decide if images already available should be reprocessed if a new run of MODIStsp is launched with the same output folder. If set to “No”, MODIStsp skips dates for which output files following the MODIStsp naming conventions are already present in the output folder. This allows to incrementally extend MODIS time series without reprocessing already available dates.</p>
</div>
<div id="folder-for-permanent-storage-of-original-modis-hdf-images" class="section level3">
<h3 class="hasAnchor">
<a href="#folder-for-permanent-storage-of-original-modis-hdf-images" class="anchor"></a><em>Folder for permanent storage of original MODIS HDF images</em>
</h3>
<p>Select the folder where downloaded <strong>original MODIS HDF files</strong> downloaded from NASA servers will be stored.</p>
<p>The <strong>“delete original HDF files”</strong> check-box allows also to decide if the downloaded images should be deleted from the file system at the end of the processing. To avoid accidental file deletion, this is always set to “No” by default, and a warning is issued before execution whenever the selection is changed to “Yes”.</p>
</div>
</div>
<div id="saving-and-loading-processing-options" class="section level2">
<h2 class="hasAnchor">
<a href="#saving-and-loading-processing-options" class="anchor"></a><strong>Saving and Loading Processing Options</strong>
</h2>
<p>Specified processing parameters can be saved to a JSON file for later use by clicking on the <em><strong>Save Options</strong></em> button.</p>
<p>Previously saved options can be restored clicking on the <em><strong>Load Options</strong></em> button and navigating to the previously saved JSON file.</p>
<p><font size="2"> (Note that at launch, <strong><code>MODIStsp</code> <em>always reloads automatically the processing options used for its last successful run</em></strong> </font>.</p>
</div>
<div id="starting-the-processing" class="section level2">
<h2 class="hasAnchor">
<a href="#starting-the-processing" class="anchor"></a><strong>Starting the processing</strong>
</h2>
<p>Once you are happy with your choices, click on <strong>Start Processing</strong>. <code>MODIStsp</code> will start accessing NASA servers to download and process the MODIS data corresponding to your choices.</p>
<p>For each date of the specified time period, <code>MODIStp</code> downloads and preprocesses all hdf images required to cover the desired spatial extent. Informative messages concerning the status of the processing are provided on the console, as well as on a self-updating progress window.</p>
<p>The processed time series are saved in specific subfolders of the main selected output folder, as explained in detail <a href="articles/output.html">HERE</a>.</p>
</div>
</div>
<div id="non-interactive-execution-from-within-r" class="section level1">
<h1 class="hasAnchor">
<a href="#non-interactive-execution-from-within-r" class="anchor"></a>Non-Interactive Execution from within R</h1>
<div id="specifying-a-saved-options-file" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-a-saved-options-file" class="anchor"></a>Specifying a saved “Options file”</h2>
<p><code>MODIStsp</code> can be launched in non-interactive mode within an <code>R</code> session by setting the optional <code>GUI</code> parameter to FALSE, and the <code>Options_File</code> parameter to the path of a previously saved JSON Options file. This allows to exploit <code>MODIStsp</code> functionalities within generic “R” processing scripts:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(MODIStsp) </a>
<a class="sourceLine" id="cb20-2" data-line-number="2"></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="co"># **</span><span class="al">NOTE</span><span class="co">** Output files of examples are saved to file.path(tempdir(), "MODIStsp").</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="co"># You can run the examples with `gui = TRUE` to set a different output folder!</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co"># --&gt; Specify the path to a valid options file saved in advance from MODIStsp GUI </span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co"># Here we use a test json file saved in MODIStsp installation folder which</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co"># downloads and processed 3 MOD13A2 images over the Como Lake (Lombardy, Italy)</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co"># and retrieves NDVI and EVI data, plus the Usefulness Index Quality Indicator.</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"></a>
<a class="sourceLine" id="cb20-11" data-line-number="11">options_file &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"testdata/test_MOD13A2.json"</span>, <span class="dt">package =</span> <span class="st">"MODIStsp"</span>)</a>
<a class="sourceLine" id="cb20-12" data-line-number="12"></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co"># --&gt; Launch the processing</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="kw"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="dt">gui =</span> <span class="ot">FALSE</span>, <span class="dt">options_file =</span> options_file, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb20-15" data-line-number="15"></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co"># Outputs are in this case in subfolder "MODIStsp/VI_16Days_1Km_v6" of `base::tempdir()`: </span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"></a>
<a class="sourceLine" id="cb20-18" data-line-number="18">out_fold &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempdir</a></span>(), <span class="st">"MODIStsp/VI_16Days_1Km_v6"</span>) </a>
<a class="sourceLine" id="cb20-19" data-line-number="19"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(out_fold)</a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="co">#&gt; [1] "EVI"         "NDVI"        "QA_usef"     "Time_Series"</span></a>
<a class="sourceLine" id="cb20-21" data-line-number="21"></a>
<a class="sourceLine" id="cb20-22" data-line-number="22"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(out_fold ,<span class="st">"EVI"</span>))</a>
<a class="sourceLine" id="cb20-23" data-line-number="23"><span class="co">#&gt; [1] "MOD13A2_EVI_2016_161.tif" "MOD13A2_EVI_2016_177.tif"</span></a></code></pre></div>
</div>
<div id="looping-over-different-options-files" class="section level2">
<h2 class="hasAnchor">
<a href="#looping-over-different-options-files" class="anchor"></a>Looping over different Options files</h2>
<p>If you need to process different MODIS products, you can prepare beforehand different MODIStsp options files by using the GUI, and then loop over them like this:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">opts_files &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"testdata/test_MOD13A2.json"</span>, <span class="dt">package =</span> <span class="st">"MODIStsp"</span>), </a>
<a class="sourceLine" id="cb21-2" data-line-number="2">                <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"testdata/test_MOD10A2.json"</span>, <span class="dt">package =</span> <span class="st">"MODIStsp"</span>))</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="cf">for</span> (opts_file <span class="cf">in</span> opts_files) {</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">  <span class="kw"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="dt">gui =</span> <span class="ot">FALSE</span>, <span class="dt">options_file =</span> opts_file)</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb21-7" data-line-number="7"></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co"># MOD13A2 ouputs</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9">out_fold &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempdir</a></span>(), <span class="st">"MODIStsp/VI_16Days_1Km_v6"</span>) </a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(out_fold)</a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">#&gt; [1] "EVI"         "NDVI"        "QA_usef"     "Time_Series"</span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(out_fold ,<span class="st">"EVI"</span>))</a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">#&gt; [1] "MOD13A2_EVI_2016_161.tif" "MOD13A2_EVI_2016_177.tif"</span></a>
<a class="sourceLine" id="cb21-14" data-line-number="14"></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co"># MOD10A2 ouputs</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16">out_fold &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempdir</a></span>(), <span class="st">"MODIStsp/Surf_Temp_8Days_1Km_v6"</span>) </a>
<a class="sourceLine" id="cb21-17" data-line-number="17"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(out_fold)</a>
<a class="sourceLine" id="cb21-18" data-line-number="18"><span class="co">#&gt; [1] "Days_Clear"    "LST_Day_1km"   "LST_Night_1km" "Time_Series"  </span></a>
<a class="sourceLine" id="cb21-19" data-line-number="19"></a>
<a class="sourceLine" id="cb21-20" data-line-number="20"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(out_fold ,<span class="st">"LST_Night_1km"</span>))</a>
<a class="sourceLine" id="cb21-21" data-line-number="21"><span class="co">#&gt; [1] "MOD11A2_LST_Night_1km_2016_153.tif" "MOD11A2_LST_Night_1km_2016_161.tif"</span></a>
<a class="sourceLine" id="cb21-22" data-line-number="22"><span class="co">#&gt; [3] "MOD11A2_LST_Night_1km_2016_169.tif" "MOD11A2_LST_Night_1km_2016_177.tif"</span></a></code></pre></div>
</div>
<div id="looping-on-different-spatial-extents" class="section level2">
<h2 class="hasAnchor">
<a href="#looping-on-different-spatial-extents" class="anchor"></a>Looping on different spatial extents</h2>
<p>Specifying also the <code>spatial_file_path_</code> parameter overrides for example the output extent of the selected Options File. This allows to perform the same preprocessing on different extents using a single Options File. For example:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="co"># Run the tool using the settings previously saved in a specific option file</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="co"># and specifying the extent from a spatial file allows to re-use the same</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="co"># processing settings to perform download and reprocessing on a different area</span></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(MODIStsp) </a>
<a class="sourceLine" id="cb22-5" data-line-number="5">options_file &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"testdata/test_MOD13A2.json"</span>, <span class="dt">package =</span> <span class="st">"MODIStsp"</span>)</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">spatial_file &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"testdata/lakeshapes/garda_lake.shp"</span>, <span class="dt">package =</span> <span class="st">"MODIStsp"</span>)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="kw"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="dt">gui =</span> <span class="ot">FALSE</span>, <span class="dt">options_file =</span> options_file,</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">         <span class="dt">spatial_file_path =</span> spatial_file, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-9" data-line-number="9"></a>
<a class="sourceLine" id="cb22-10" data-line-number="10"><span class="co"># --&gt; Create a character array containing a list of shapefiles (or other spatial files)</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">extent_list =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"testdata/lakeshapes/"</span>, <span class="dt">package =</span> <span class="st">"MODIStsp"</span>), </a>
<a class="sourceLine" id="cb22-12" data-line-number="12">                         <span class="dt">full.names =</span> <span class="ot">TRUE</span>, <span class="st">"</span><span class="ch">\\</span><span class="st">.shp$"</span>)  </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">extent_list</a>
<a class="sourceLine" id="cb22-14" data-line-number="14"></a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="co">#&gt; [1] "D:/Documents/Source/git/MODIStsp/inst/testdata/lakeshapes/garda_lake.shp"</span></a>
<a class="sourceLine" id="cb22-16" data-line-number="16"><span class="co">#&gt; [2] "D:/Documents/Source/git/MODIStsp/inst/testdata/lakeshapes/iseo_lake.shp"</span></a>
<a class="sourceLine" id="cb22-17" data-line-number="17"></a>
<a class="sourceLine" id="cb22-18" data-line-number="18"><span class="co"># --&gt; Loop on the list of spatial files and run MODIStsp using each of them to </span></a>
<a class="sourceLine" id="cb22-19" data-line-number="19"><span class="co"># automatically define the output extent (A separate output folder is created for</span></a>
<a class="sourceLine" id="cb22-20" data-line-number="20"><span class="co"># each input spatial file).</span></a>
<a class="sourceLine" id="cb22-21" data-line-number="21"></a>
<a class="sourceLine" id="cb22-22" data-line-number="22"><span class="cf">for</span> (single_shape <span class="cf">in</span> extent_list) {</a>
<a class="sourceLine" id="cb22-23" data-line-number="23">  <span class="kw"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="dt">gui =</span> <span class="ot">FALSE</span>, <span class="dt">options_file =</span> options_file, </a>
<a class="sourceLine" id="cb22-24" data-line-number="24">           <span class="dt">spatial_file_path =</span> single_shape )</a>
<a class="sourceLine" id="cb22-25" data-line-number="25">}</a>
<a class="sourceLine" id="cb22-26" data-line-number="26"></a>
<a class="sourceLine" id="cb22-27" data-line-number="27"><span class="co"># output files are placed in separate folders. For example here you can see how to </span></a>
<a class="sourceLine" id="cb22-28" data-line-number="28"><span class="co"># access a list of produced files and plot one of them: </span></a>
<a class="sourceLine" id="cb22-29" data-line-number="29">outfiles_garda &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(</a>
<a class="sourceLine" id="cb22-30" data-line-number="30">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempdir</a></span>(), <span class="st">"MODIStsp/garda_lake/VI_16Days_1Km_v6/EVI"</span>),</a>
<a class="sourceLine" id="cb22-31" data-line-number="31">  <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-32" data-line-number="32"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(raster)       </a>
<a class="sourceLine" id="cb22-33" data-line-number="33"><span class="kw"><a href="https://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/raster/topics/raster">raster</a></span>(outfiles_garda[<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb22-34" data-line-number="34"></a>
<a class="sourceLine" id="cb22-35" data-line-number="35">outfiles_iseo &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(</a>
<a class="sourceLine" id="cb22-36" data-line-number="36">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempdir</a></span>(), <span class="st">"MODIStsp/iseo_lake/VI_16Days_1Km_v6/EVI"</span>),</a>
<a class="sourceLine" id="cb22-37" data-line-number="37">  <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-38" data-line-number="38"><span class="kw"><a href="https://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/raster/topics/raster">raster</a></span>(outfiles_iseo[<span class="dv">1</span>]))</a></code></pre></div>
</div>
</div>
<div id="stand-alone-execution-and-scheduled-processing" class="section level1">
<h1 class="hasAnchor">
<a href="#stand-alone-execution-and-scheduled-processing" class="anchor"></a>Stand-alone execution and scheduled processing</h1>
<div id="stand-alone-execution" class="section level2">
<h2 class="hasAnchor">
<a href="#stand-alone-execution" class="anchor"></a>Stand-alone execution</h2>
<ul>
<li>MODIStsp can be also executed as a “stand-alone” application(i.e., without having to open R/RStudio); to do this, from R launch the function <code>MODIStsp_install_launcher()</code>.</li>
</ul>
<p>In a Linux operating system this function creates a desktop entry (accessible from the menu in the sections “Science” and “Geography”) and a symbolic link in a known path (default: /usr/bin/MODIStsp). In Windows, a link in the Start Menu and optionally a desktop shortcut are created. See <code><a href="../reference/install_MODIStsp_launcher.html">?install_MODIStsp_launcher</a></code> for details and path customization.</p>
<p>Double-clicking those files or launching them from a shell without parameters will launch <code>MODIStsp</code> in interactive mode. Non-interactive mode is triggered by adding the “-g” argument to the call, and specifying the path to a valid Options File as “-s” argument:</p>
<ul>
<li><p>Linux: <code>MODIStsp -g -s "/yourpath/youroptions.json"</code> (see <code>MODIStsp -h</code> for details).</p></li>
<li><p>Windows:<code>your_r_library\MODIStsp\ExtData\Launcher\MODIStsp.bat -g -s "yourpath/youroptions.json"</code> (see <code>C:\Users\you\Desktop\MODIStsp -h</code> for details).</p></li>
</ul>
<p>If you do not want to install any link, launchers can be found in the subdirectory “MODIStsp/ExtData/Launcher” of your library path.</p>
</div>
<div id="scheduled-processing" class="section level2">
<h2 class="hasAnchor">
<a href="#scheduled-processing" class="anchor"></a>Scheduled Processing</h2>
<p>Stand-alone non-interactive execution can be used to periodically and automatically update the time series of a selected product over a given study area. To do that, you should simply:</p>
<ol style="list-style-type: decimal">
<li><p>Open the <code>MODIStsp</code> GUI, define the parameters of the processing specifying a date in the future as the “Ending Date” and save the processing options. Then quit the program.</p></li>
<li><p>Schedule non-interactive execution of the launcher installed as seen before (or located in the subdirectory “MODIStsp/ExtData/Launcher” of your library path) as windows scheduled task (or linux “cron” job) according to a specified time schedule, specifying the path of a previously saved Options file as additional argument:</p></li>
</ol>
<div id="on-linux" class="section level4">
<h4 class="hasAnchor">
<a href="#on-linux" class="anchor"></a>On Linux</h4>
<ul>
<li>edit your crontab by opening a terminal and type:</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb23-1" data-line-number="1">  <span class="ex">crontab</span> -e</a></code></pre></div>
<ul>
<li>add an entry for the launcher. For example, if you have installed it in /usr/bin and you want to run the tool every day at 23.00, add the following row:</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb24-1" data-line-number="1">  <span class="ex">0</span> 23 * * * /bin/bash /usr/bin/MODIStsp -g -s <span class="st">"/yourpath/youroptions.json"</span></a></code></pre></div>
</div>
<div id="on-windows-1" class="section level4">
<h4 class="hasAnchor">
<a href="#on-windows-1" class="anchor"></a>On Windows</h4>
<ul>
<li>create a Task following <a href="https://technet.microsoft.com/en-us/library/cc748993.aspx">these instructions</a>; add the path of the MODIStsp.bat launcher as Action (point 6), and specifying <code>-g -s "X:/yourpath/youroptions.json"</code> as argument.</li>
</ul>
</div>
</div>
</div>
<div id="outputs-format-and-naming-conventions" class="section level1">
<h1 class="hasAnchor">
<a href="#outputs-format-and-naming-conventions" class="anchor"></a>Outputs Format and Naming Conventions</h1>
<div id="single-band-outputs" class="section level2">
<h2 class="hasAnchor">
<a href="#single-band-outputs" class="anchor"></a>Single-band outputs</h2>
<p>Output raster files are saved in specific subfolders of the main output folder. In particular, <strong>a separate subfolder</strong> is created for each processed original MODIS layer, Quality Indicator or Spectral Index. Each subfolder contains one image for each processed date, created according to the following naming conventions:</p>
<pre><code>myoutfolder/"Layer"/"ProdCode"_"Layer"_"YYYY"_"DOY"."ext"</code></pre>
<p><font size="2"> <em>(e.g., myoutfolder/NDVI/MOD13Q1_NDVI_2000_065.dat)</em> </font></p>
<p>, where:</p>
<ul>
<li>
<strong><em>Layer</em></strong> is a short name describing the dataset (e.g., b1_Red, NDII, UI);</li>
<li>
<strong><em>ProdCode</em></strong> is the code name of the MODIS product from which the image was derived (e.g., MOD13Q1);</li>
<li>
<strong><em>YYYY</em></strong> and <strong><em>DOY</em></strong> correspond to the year and DOY (Day of the Year) of acquisition of the original MODIS image;</li>
<li>
<strong><em>ext</em></strong> is the file extension (.tif for GTiff outputs, or .dat for ENVI outputs).</li>
</ul>
<hr>
</div>
<div id="virtual-multi-band-outputs" class="section level2">
<h2 class="hasAnchor">
<a href="#virtual-multi-band-outputs" class="anchor"></a>Virtual multi-band outputs</h2>
<p>ENVI and/or GDAL virtual time series files and <em>RasterStack</em> RData objects are instead stored <strong>in the “Time_Series” subfolder</strong> if required.</p>
<p>Naming convention for these files is as follow:</p>
<pre><code>myoutfolder/Time_Series/"vrt_type"/"Sensor"/"Layer"/"ProdCode"_"Layer"_"StartDOY"_"StartYear_"EndDOY"_"EndYear_"suffix".ext" </code></pre>
<p><font size="2"> <em>(e.g., myoutfolder/Time_Series/RData/Terra/NDVI/MOD13Q1_MYD13Q1_NDVI_49_2000_353_2015_RData.RData)</em> </font></p>
<p>, where:</p>
<ul>
<li>
<strong><em>vrt_type</em></strong> indicates the type of virtual file (“RData”, “GDAL” or “ENVI_META”);</li>
<li>
<strong><em>Sensor</em></strong> indicates to which MODIS sensor the time series belongs (“Terra”, “Aqua”, “Mixed” or “Combined” (for MCD* products));</li>
<li>
<strong><em>Layer</em></strong> is a short name describing the dataset (e.g., b1_Red, NDII, UI);</li>
<li>
<strong><em>ProdCode</em></strong> is the code name of the MODIS product from which the image was derived (e.g., MOD13Q1);</li>
<li>
<strong><em>StartDOY</em></strong>, <strong><em>StartYear</em></strong>, <strong><em>EndDOY</em></strong> and <strong><em>EndYear</em></strong> indicate the temporal extent of the time serie created;</li>
<li>
<strong><em>suffix</em></strong> indicates the type of virtual file (ENVI, GDAL or RData);</li>
<li>
<strong><em>ext</em></strong> is the file extension (“.vrt” for gdal virtual files, “META” for ENVI meta files or “RData” for <code>R</code> raster stacks).</li>
</ul>
</div>
</div>
<div id="accessing-the-processed-time-series-from-r" class="section level1">
<h1 class="hasAnchor">
<a href="#accessing-the-processed-time-series-from-r" class="anchor"></a>Accessing the processed time series from R</h1>
<p>Preprocessed MODIS data can be retrieved within <code>R</code> either by accessing the single-date raster files, or by loading the saved <em>RasterStack</em> objects.</p>
<p>Any single-date image can be accessed by simply opening it with a <code>raster</code> command:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(raster)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">modistsp_file &lt;-<span class="st"> "/my_outfolder/EVI/MOD13Q1_2005_137_EVI.tif"</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3">my_raster &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/raster/topics/raster">raster</a></span>(modistsp_file)</a></code></pre></div>
<p><code>rasterStack</code> time series containing all the processed data for a given parameter (saved in the “Time Series/RData” subfolder - see <a href="output.html">here</a> for details) can be opened by:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">in_virtual_file &lt;-<span class="st"> "/my_outfolder/Time_Series/RData/Terra/EVI/MOD13Q1_MYD13Q1_NDVI_49_2000_353_2015_RData.RData"</span> </a>
<a class="sourceLine" id="cb28-2" data-line-number="2">indata          &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/load">load</a></span>(in_virtual_file))</a></code></pre></div>
<p>This second option allows accessing the complete data stack and analyzing it using the functionalities for raster/raster time series analysis, extraction and plotting provided for example by the <code>raster</code> or <code>rasterVis</code> packages.</p>
<div id="extracting-time-series-data-on-areas-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#extracting-time-series-data-on-areas-of-interest" class="anchor"></a>Extracting Time Series Data on Areas of Interest</h2>
<p><code>MODIStsp</code> provides an efficient function (<code>MODIStsp\_extract</code>) for extracting time series data at specific locations. The function takes as input a <em>RasterStack</em> virtual object created by <code>MODIStsp</code> (see above), the starting and ending dates for the extraction and a standard _Sp*_ object (or an ESRI shapefile name) specifying the locations (points, lines or polygons) of interest, and provides as output a <code>xts</code> object or <code>data.frame</code> containing time series data for those locations.</p>
<p>If the input is of class <em>SpatialPoints</em>, the output object contains one column for each point specified, and one row for each date. If it is of class <em>SpatialPolygons</em> (or <em>SpatialLines</em>), it contains one column for each polygon (or each line), with values obtained applying the function specified as the “FUN” argument (e.g., mean, standard deviation, etc.) on pixels belonging to the polygon (or touched by the line), and one row for each date.</p>
<p>As an example the following code:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">  <span class="co">#Set the input paths to raster and shape file</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2">  infile    &lt;-<span class="st"> 'myoutfolder/Time_Series/RData/Mixed/MOD13Q1_MYD13Q1_NDVI_49_2000_353_2015_RData.RData'</span>  </a>
<a class="sourceLine" id="cb29-3" data-line-number="3">  shpname   &lt;-<span class="st"> 'path_to_file/rois.shp'</span>  </a>
<a class="sourceLine" id="cb29-4" data-line-number="4">  <span class="co">#Set the start/end dates for extraction</span></a>
<a class="sourceLine" id="cb29-5" data-line-number="5">  startdate &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"2010-01-01"</span>)  </a>
<a class="sourceLine" id="cb29-6" data-line-number="6">  enddate   &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"2014-12-31"</span>)    </a>
<a class="sourceLine" id="cb29-7" data-line-number="7">  <span class="co">#Load the RasterStack</span></a>
<a class="sourceLine" id="cb29-8" data-line-number="8">  inrts     &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/load">load</a></span>(infile)) </a>
<a class="sourceLine" id="cb29-9" data-line-number="9">  <span class="co"># Compute average and St.dev</span></a>
<a class="sourceLine" id="cb29-10" data-line-number="10">  dataavg   &lt;-<span class="st"> </span><span class="kw"><a href="../reference/MODIStsp_extract.html">MODIStsp_extract</a></span>(inrts, shpname, startdate, enddate, <span class="dt">FUN =</span> <span class="st">'mean'</span>, <span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb29-11" data-line-number="11">  datasd    &lt;-<span class="st"> </span><span class="kw"><a href="../reference/MODIStsp_extract.html">MODIStsp_extract</a></span> (inrts, shpname, startdate, enddate, <span class="dt">FUN =</span> <span class="st">'sd'</span>, <span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb29-12" data-line-number="12">  <span class="co"># Plot average time series for the polygons</span></a>
<a class="sourceLine" id="cb29-13" data-line-number="13">  <span class="kw">plot.xts</span>(dataavg) </a></code></pre></div>
<p>loads a <em>RasterStack</em> object containing 8-days 250 m resolution time series for the 2000-2015 period and extracts time series of average and standard deviation values over the different polygons of a user’s selected shapefile on the 2010-2014 period.</p>
</div>
</div>
<div id="problems-and-issues" class="section level1">
<h1 class="hasAnchor">
<a href="#problems-and-issues" class="anchor"></a>Problems and Issues</h1>
<p>Solutions to some common <strong>installation and processing problems</strong> can be found in MODIStsp FAQ:</p>
<p><a href="http://ropensci.github.io/MODIStsp/articles/faq.html" class="uri">http://ropensci.github.io/MODIStsp/articles/faq.html</a></p>
<ul>
<li>Please <strong>report any issues</strong> you may encounter in our issues page on GitHub:</li>
</ul>
<p><a href="https://github.com/ropensci/MODIStsp/issues" class="uri">https://github.com/ropensci/MODIStsp/issues</a></p>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h1>
<p>To cite MODIStsp please use:</p>
<p>L. Busetto, L. Ranghetti (2016) MODIStsp: An R package for automatic preprocessing of MODIS Land Products time series, Computers &amp; Geosciences, Volume 97, Pages 40-48, ISSN 0098-3004, <a href="https://doi.org/10.1016/j.cageo.2016.08.020" class="uri">https://doi.org/10.1016/j.cageo.2016.08.020</a>, URL: <a href="https://github.com/ropensci/MODIStsp" class="uri">https://github.com/ropensci/MODIStsp</a>.</p>
<p><a name="gdal_inst"></a></p>
</div>
<div id="installing-r-and-gdal" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-r-and-gdal" class="anchor"></a>Installing R and GDAL</h1>
<div id="installing-r" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-r" class="anchor"></a>Installing R</h2>
<div id="windows" class="section level3">
<h3 class="hasAnchor">
<a href="#windows" class="anchor"></a>Windows</h3>
<p>Download and install the latest version of R which can be found <a href="https://cran.r-project.org/bin/windows/base">here</a>.</p>
</div>
<div id="linux" class="section level3">
<h3 class="hasAnchor">
<a href="#linux" class="anchor"></a>Linux</h3>
<p>Please refer to the documentation which can be found <a href="https://cran.r-project.org/bin/linux">here</a>, opening the directory relative to your Linux distribution. The documentation provides instruction to add CRAN repositories and to install the latest R version. With Ubuntu 15.10 Wily (and newer) this step is not mandatory (although recommended), since packaged version of R is &gt;= 3.2.1 (although not the latest); in this case, user can install R by simply typing in a terminal</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="fu">sudo</span> apt-get install r-base</a></code></pre></div>
</div>
</div>
<div id="installing-gdal-1-11-1" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-gdal-1-11-1" class="anchor"></a>Installing GDAL &gt;= 1.11.1</h2>
<div id="windows-1" class="section level3">
<h3 class="hasAnchor">
<a href="#windows-1" class="anchor"></a>Windows</h3>
<p>The easiest way to install GDAL on Windows is from the <a href="https://trac.osgeo.org/osgeo4w/">OSGeo4W Website</a></p>
<ol style="list-style-type: decimal">
<li>Open the <a href="https://trac.osgeo.org/osgeo4w/">OSGeo4W Website</a>
</li>
<li>In the <strong>Quick Start for OSGeo4W Users</strong> section, select the download of 32bit or 64bit of OSGeo4W network installer</li>
<li>Run the installer</li>
</ol>
<ul>
<li>
<em>Easiest Option</em>:
<ul>
<li>Select <strong>Express Desktop Install</strong>, then proceed with the installation. This will install GDAL and also other useful Spatial Processing software like <a href="http://www.qgis.org/">QGIS</a> and <a href="https://grass.osgeo.org/">GRASS GIS</a>
</li>
</ul>
</li>
<li>
<em>Advanced Option</em>:
<ul>
<li>Select <strong>Advanced Install</strong>, then click on “Next” a few times until you reach the “Select Packages” screen.</li>
<li>Click on “Commandline_Utilities_”, and on the list look for "_gdal: The GDAL/OGR library…" entry</li>
<li>Click on “Skip”: the word “skip” will be replaced by the current GDAL version number</li>
<li>Click on “Next” a few times to install GDAL</li>
</ul>
</li>
</ul>
</div>
<div id="debian-and-ubuntu-based-systems" class="section level3">
<h3 class="hasAnchor">
<a href="#debian-and-ubuntu-based-systems" class="anchor"></a>Debian and Ubuntu-based systems</h3>
<ol style="list-style-type: decimal">
<li><p>Ensure that your repositories contain a version of <code>gdal-bin</code> &gt;= 1.11.1. In particular, official repositories of Ubuntu 15.04 Vivid (or older) and Debian Jessie (or older) provide older versions of GDAL, so it is necessary to add UbuntuGIS-unstable repository before installing. To do this, follow instructions <a href="https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable">here</a>). With Ubuntu 15.10 Wily (and newer) this step is not mandatory, although recommended in order to have updated version of GDAL installed.</p></li>
<li><p>To install GDAL, open a terminal and type<br><code>bash  sudo apt-get install gdal-bin</code></p></li>
</ol>
</div>
<div id="archlinux" class="section level3">
<h3 class="hasAnchor">
<a href="#archlinux" class="anchor"></a>ArchLinux</h3>
<p>GDAL is maintained updated to the latest version as binary package within the community repository; although that, the support for HDF4 format is not included. To bypass this problem, ArchLinux users can install <code>gdal-hdf4</code> package from AUR (see <a href="https://wiki.archlinux.org/index.php/Arch_User_Repository#Installing_packages">here</a> or <a href="https://archlinux.fr/yaourt-en">here</a> for the package installation from AUR). This package is updated manually after each release of <code>gdal</code> on the community repository, so a temporal shift between a new <code>gdal</code> release and the update of <code>gdal-hdf4</code> could happen. If you want to manually add the support for HDF4 in case <code>gdal-hdf4</code> is out-of-date, you can do it following <a href="https://notehub.org/fctdn">these instructions</a>.</p>
</div>
<div id="other-linux-systems" class="section level3">
<h3 class="hasAnchor">
<a href="#other-linux-systems" class="anchor"></a>Other Linux systems</h3>
<p>Install the packaged binary of GDAL included in your specific distribution; if the version is older than 1.11.1, or if the support for HDF4 format is not included, you can manually install the HDF4 library and compile the source code by adding the parameter <code>--with-hdf4</code> to the <code>configure</code> instruction).</p>
<div id="macos" class="section level4">
<h4 class="hasAnchor">
<a href="#macos" class="anchor"></a>MacOs</h4>
<ol style="list-style-type: decimal">
<li>Check if gdal is already installed and has hdf4 support. In a terminal, type:</li>
</ol>
<pre><code>~$ gdal-config --formats </code></pre>
<ul>
<li><p>if gdal is installed, the command will list which drivers are installed. If the list includes “hdf4” you should be good to go.</p></li>
<li><p>if gdal is not yet installed or hdf4 is not already supported, you can install/reinstall it following these <a href="http://r-sig-geo.2731867.n2.nabble.com/OSX-rgdal-GDAL-drivers-and-HDF4-td7588400.html">notes</a>. In short: open a terminal and run:</p></li>
</ul>
<pre><code>~$ brew install hdf4 
~$ brew link --overwrite hdf4 
~$ brew install gdal --complete --enable-unsupported --with-hdf4 </code></pre>
<p>then, check again to see if hdf4 is supported. The list should now include hdf4:</p>
<pre><code>~$ gdal-config --formats </code></pre>
<p>Good luck!</p>
</div>
</div>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Boschetti2014">
<p>Boschetti, M., F. Nutini, G. Manfron, P. A. Brivio, and A. Nelson. 2014. “Comparative analysis of normalised difference spectral indices derived from MODIS for detecting surface water in flooded rice cropping systems.” <em>PLoS ONE</em> 9 (2). <a href="https://doi.org/10.1371/journal.pone.0088741">https://doi.org/10.1371/journal.pone.0088741</a>.</p>
</div>
<div id="ref-Gamon1999">
<p>Gamon, J.A., and J.S. Surfus. 1999. “Assessing leaf pigment content and activity with a reflectometer.” <em>New Phytologis</em> 143 (1): 105–17.</p>
</div>
<div id="ref-Gitelson1998">
<p>Gitelson, A.A., and M.N. Merzlyak. 1998. “Remote sensing of chlorophyll concentration in higher plant leaves.” <em>Advances in Space Research</em> 22 (5): 689–92. <a href="https://doi.org/10.1016/S0273-1177(97)01133-2">https://doi.org/10.1016/S0273-1177(97)01133-2</a>.</p>
</div>
<div id="ref-Hall2002">
<p>Hall, Dorothy K, George A Riggs, Vincent V Salomonson, Nicolo E DiGirolamo, and Klaus J Bayr. 2002. “MODIS snow-cover products.” <em>Remote Sensing of Environment</em> 83 (1-2): 181–94. <a href="https://doi.org/10.1016/S0034-4257(02)00095-0">https://doi.org/10.1016/S0034-4257(02)00095-0</a>.</p>
</div>
<div id="ref-Hengl2010">
<p>Hengl, T. 2010. “Download and resampling of MODIS images.” <a href="http://spatial-analyst.net/wiki/index.php?title=Download_and_resampling_of_MODIS_images">http://spatial-analyst.net/wiki/index.php?title=Download_and_resampling_of_MODIS_images</a>.</p>
</div>
<div id="ref-Huete2002">
<p>Huete, A., K. Didan, T. Miura, E.P. Rodriguez, X. Gao, and L.G. Ferreira. 2002. “Overview of the radiometric and biophysical performance of the MODIS vegetation indices.” <em>Remote Sensing of Environment</em> 83 (1-2): 195–213. <a href="https://doi.org/10.1016/S0034-4257(02)00096-2">https://doi.org/10.1016/S0034-4257(02)00096-2</a>.</p>
</div>
<div id="ref-Huete1988">
<p>Huete, A.R. 1988. “A soil-adjusted vegetation index (SAVI).” <em>Remote Sensing of Environment</em> 25 (3): 295–309. <a href="https://doi.org/10.1016/0034-4257(88)90106-X">https://doi.org/10.1016/0034-4257(88)90106-X</a>.</p>
</div>
<div id="ref-HUNTJR1989">
<p>Hunt, J.R., and B. Rock. 1989. “Detection of changes in leaf water content using Near- and Middle-Infrared reflectances.” <em>Remote Sensing of Environment</em> 30 (1): 43–54. <a href="https://doi.org/10.1016/0034-4257(89)90046-1">https://doi.org/10.1016/0034-4257(89)90046-1</a>.</p>
</div>
<div id="ref-Naimi2014">
<p>Naimi, B. 2014. “ModisDownload: an R function to download, mosaic, and reproject the MODIS images.” <a href="http://r-gis.net/?q=ModisDownload">http://r-gis.net/?q=ModisDownload</a>.</p>
</div>
<div id="ref-Rouse1973">
<p>Rouse, J.W.J., R.H. Haas, J.A. Schell, and D.W. Deering. 1973. “Monitoring vegetation systems in the Great Plains with ERTS. Third ERTS Symposium, NASA SP-351. U.S. Gov. Printing office.” Edited by S.C. Freden, E.P. Mercanti, and M.A. Becker. NASA.</p>
</div>
<div id="ref-Tucker1979">
<p>Tucker, C.J. 1979. “Red and photographic infrared linear combinations for monitoring vegetation.” <em>Remote Sensing of Environment</em> 8 (2): 127–50. <a href="https://doi.org/10.1016/0034-4257(79)90013-0">https://doi.org/10.1016/0034-4257(79)90013-0</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#installation">Installation</a><ul class="nav nav-pills nav-stacked">
<li><a href="#on-windows">On Windows</a></li>
      <li><a href="#on-linux-systems">On Linux systems</a></li>
      <li><a href="#on-mac-os">On Mac OS</a></li>
      </ul>
</li>
      <li>
<a href="#running-the-tool-in-interactive-mode-the-modistsp-gui">Running the tool in Interactive Mode: the MODIStsp GUI</a><ul class="nav nav-pills nav-stacked">
<li><a href="#selecting-processing-parameters"><strong>Selecting Processing Parameters</strong></a></li>
      <li><a href="#saving-and-loading-processing-options"><strong>Saving and Loading Processing Options</strong></a></li>
      <li><a href="#starting-the-processing"><strong>Starting the processing</strong></a></li>
      </ul>
</li>
      <li>
<a href="#non-interactive-execution-from-within-r">Non-Interactive Execution from within R</a><ul class="nav nav-pills nav-stacked">
<li><a href="#specifying-a-saved-options-file">Specifying a saved “Options file”</a></li>
      <li><a href="#looping-over-different-options-files">Looping over different Options files</a></li>
      <li><a href="#looping-on-different-spatial-extents">Looping on different spatial extents</a></li>
      </ul>
</li>
      <li>
<a href="#stand-alone-execution-and-scheduled-processing">Stand-alone execution and scheduled processing</a><ul class="nav nav-pills nav-stacked">
<li><a href="#stand-alone-execution">Stand-alone execution</a></li>
      <li><a href="#scheduled-processing">Scheduled Processing</a></li>
      </ul>
</li>
      <li>
<a href="#outputs-format-and-naming-conventions">Outputs Format and Naming Conventions</a><ul class="nav nav-pills nav-stacked">
<li><a href="#single-band-outputs">Single-band outputs</a></li>
      <li><a href="#virtual-multi-band-outputs">Virtual multi-band outputs</a></li>
      </ul>
</li>
      <li>
<a href="#accessing-the-processed-time-series-from-r">Accessing the processed time series from R</a><ul class="nav nav-pills nav-stacked">
<li><a href="#extracting-time-series-data-on-areas-of-interest">Extracting Time Series Data on Areas of Interest</a></li>
      </ul>
</li>
      <li><a href="#problems-and-issues">Problems and Issues</a></li>
      <li><a href="#citation">Citation</a></li>
      <li>
<a href="#installing-r-and-gdal">Installing R and GDAL</a><ul class="nav nav-pills nav-stacked">
<li><a href="#installing-r">Installing R</a></li>
      <li><a href="#installing-gdal-1-11-1">Installing GDAL &gt;= 1.11.1</a></li>
      </ul>
</li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Lorenzo Busetto, Luigi Ranghetti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
